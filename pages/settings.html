<!DOCTYPE html>
<html lang="en">
<script>
    if (sessionStorage.getItem('token') == null) {
        window.location.href = 'auth.html';
    }
</script>

<head>

    <script src="send_token.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        «Блюринг» изображений</title>
    <!-- Здесь вы можете добавить дополнительные метатеги, стили и скрипты -->
</head>

<body>
    <header>
        <nav id="navbar" class="navbar navbar-dark">
            <div class="settings-button" onclick="home()">
                <i class="fas fa-home fa-2x" style="color: rgb(255, 255, 255); size: 20px;"></i>
                Главная
            </div>
            <h1 class="header-title">Настройки сервиса</h1>
            <div class="header-buttons">
                <div class="user-icon">
                    <img src="user.png" alt="user.png">
                    <span id='username' class="username">John Doe</span>
                </div>
                <button class="button" onclick="logOut()">Выйти</button>
            </div>
        </nav>
    </header>

    <body>
        <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample"
            aria-labelledby="offcanvasExampleLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="offcanvasExampleLabel">Меню</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Закрыть"></button>
            </div>
        </div>
        <div id="settings_container">
            <div id="blur_percent_settings">
                <label for="blur_percent">Процент блюринга по умолчанию:</label>
                <input type="text" class="form-control" id="blur_percent" value="20">
                <p id="blurError" class="error-message"></p>
            </div>
            <button id="blur_settings_button" type="button" class="btn btn-dark"
                onclick="changeBlurSettings()">Принять</button>
            <div id="date_inputs">
                <div class="mb-3" id="start_date">
                    <label for="dateInput">C:</label>
                    <input type="date" class="form-control" id="dateInput" value="">
                </div>
                <div class="mb-3" id="last_date">
                    <label for="dateInput">По:</label>
                    <input type="date" class="form-control" id="dateInput" value="">
                </div>
            </div>
            <p id="dateError" class="error-message"></p>
            <button id="history_btn" type="button" class="btn btn-dark" onclick="getHistory()">Посмотреть
                историю</button>
        </div>
        <div id="table_container">
        </div>
        <script>
            const username = sessionStorage.getItem('username')
            console.log(`Username: ${username}`);
            document.getElementById('username').textContent = username
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
        <script>

            function home() {
                window.location.href = "/home.html";
            }
            function logOut() {
                sessionStorage.clear()

                window.location.href = "/auth.html";
            }
        </script>


        <script src="settings.js"></script>
    </body>

</html>